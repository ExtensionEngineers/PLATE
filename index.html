<!DOCTYPE html>
<html ng-app='app'>
<head>
    <link rel="stylesheet" type="text/css" href="lib/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
</head>
<body ng-controller='MainController'>
<div class='container'>
    <div>
        <select name="Language" id="language">

        </select>
    </div>
    <div>
        <button ng-click="toggle()">{{ buttonText }}</button>
    </div>

    <script type="text/javascript" src="lib/jquery/jquery-2.1.3.min.js"></script>
    <!--in Master branch-->
<div id="sourceText">hello world</div>
    <div id="translation"></div>
</div>

<script>
    function translateText(response) {
        //var parsed = JSON.parse(response.translateText);
        var translatedText = response.data.translations[0].translatedText;
        $("#translation").text(translatedText);
        //document.getElementById("translation").innerHTML = response.data.translations[0].translatedText;
    }
</script>

<script>

    $("#language").change(function() {
        var $language = $("#language");
        var $sourceText = $("#sourceText");

        var source = 'https://www.googleapis.com/language/translate/v2?key=AIzaSyCL9jeVEeDwzPxHXkDv39woblcUc538pDM&source=en&target='
                + $language.val()
                + '&callback=translateText&q='
                + $sourceText.text();
        //newScript.src = source;

        //$.getScript(source, function(response){
        //    document.getElementById("translation").innerHTML = response.data.translations[0].translatedText;
        //});

        $.get(source, translateText);

        // When we add this script to the head, the request is sent off.
        //$('head').append(newScript);
    });

</script>

<script>
    function injectLanguages(response){
        var dropdownHTML = "";
        //<option value="fr">French</option>
        for(var i = 0; i < response.data.languages.length; i++){
            dropdownHTML += '<option value="';
            dropdownHTML += response.data.languages[i].language;
            dropdownHTML += '">';
            dropdownHTML += response.data.languages[i].name;
            dropdownHTML += '</option>';
        };
        $('#language').html(dropdownHTML);
    }
</script>

<script>
    var source = "https://www.googleapis.com/language/translate/v2/languages?key=AIzaSyCL9jeVEeDwzPxHXkDv39woblcUc538pDM&target=en";
    $.getJSON(source, injectLanguages);
</script>

<script type="text/javascript" src="lib/angular/angular.js"></script>
<script type="text/javascript" src="lib/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/app.js"></script>
<script type="text/javascript" src="js/controllers/MainController.js"></script>
</body>
</html>